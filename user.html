<!DOCTYPE html>
 <html lang="en">
 <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Time and Motion Study - User</title>
     <link rel="stylesheet" href="styles.css">
      <style>
         /* Estilos básicos generales */
         body { font-family: sans-serif; line-height: 1.5; margin: 20px; }
         h1, h2 { margin-bottom: 0.5em; color: #333; }
         hr { border: none; border-top: 1px solid #eee; margin: 20px 0; }
         button { padding: 6px 12px; font-size: 0.9em; cursor: pointer; border-radius: 4px; border: 1px solid #ccc; background-color: #f7f7f7; margin-right: 5px;}
         button:disabled { cursor: not-allowed; opacity: 0.6; }
         button:hover:not(:disabled) { background-color: #e9e9e9; }
         input[type="text"], input[type="date"], select { padding: 6px; border: 1px solid #ccc; border-radius: 4px; font-size: 0.9em; box-sizing: border-box; } /* Added box-sizing */
         label { margin-bottom: 3px; font-weight: bold; font-size: 0.85em; color: #333; display: block; }

         /* Contenedor para Basic Information */
         #basicInfoContainer { display: flex; flex-wrap: wrap; gap: 10px 20px; padding: 15px; border: 1px solid #e0e0e0; background-color: #fdfdfd; border-radius: 5px; margin-bottom: 15px; }
         #basicInfoContainer > div { display: flex; flex-direction: column; flex: 1 1 150px; min-width: 150px; }
         #auditDateDisplay { font-weight: normal; background-color: #eee; padding: 6px; border-radius: 3px; font-size: 0.9em; display: inline-block; margin-top: 2px; }

         /* Contenedor para Session Context */
          #sessionCtx { display: flex; flex-wrap: wrap; gap: 10px 20px; align-items: flex-end; padding: 15px; border: 1px solid #e0e0e0; background-color: #fdfdfd; border-radius: 5px; margin-bottom: 15px; }
          #sessionCtx > div { display: flex; flex-direction: column; }
          #sessionCtx button { margin-top: 22px; /* Alinea botón con inputs */ }

         /* Contenedor Tabla Pasos Activos */
         .steps-table-container { margin-top: 10px; }
         #stepListTable { width: 100%; border-collapse: collapse; table-layout: fixed; }
         #stepListTable th, #stepListTable td {
            border: 1px solid #ddd;
            padding: 8px 10px;
            text-align: left;
            vertical-align: middle; /* Alinear verticalmente contenido de celdas */
            word-wrap: break-word;
         }
         #stepListTable th { background-color: #f2f2f2; font-size: 0.9em; }
         /* --- AJUSTAR ANCHOS DE COLUMNA --- */
         #stepListTable th:nth-child(1) { width: 18%; } /* Category */
         #stepListTable th:nth-child(2) { width: 30%; } /* Step Name */
         #stepListTable th:nth-child(3) { width: 12%; text-align: right; } /* Time */
         #stepListTable th:nth-child(4) { width: 20%; text-align: center;} /* Actions */
         #stepListTable th:nth-child(5) { width: 20%; } /* Sentiment */
         /* --------------------------------- */

         #stepListTable .time-display { font-family: 'Courier New', Courier, monospace; font-weight: bold; font-size: 1.1em; display: inline-block; min-width: 80px; text-align: right; font-variant-numeric: tabular-nums; }
         #stepListTable .actions-cell { white-space: nowrap; text-align: center; /* Centrar botones */ }
         #stepListTable button { margin: 0 3px; padding: 4px 10px; min-width: 60px; text-align: center; font-size: 0.9em; }

         /* --- ESTILO PARA SELECT DE SENTIMENT --- */
         #stepListTable select {
             width: 100%; /* Ocupar el ancho de la celda */
             padding: 4px;
             font-size: 0.9em;
             border: 1px solid #ccc; /* Borde sutil */
             border-radius: 4px;
             background-color: #fff; /* Fondo blanco */
             box-sizing: border-box; /* Incluir padding en el ancho */
         }
         /* -------------------------------------- */

         /* Contenedor Tabla Logs */
         #submittedAuditsSection { margin-top: 20px; }
         #submittedAuditsTableContainer table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 0.9em; }
         #submittedAuditsTableContainer th, #submittedAuditsTableContainer td { border: 1px solid #ccc; padding: 4px 6px; text-align: left; }
         #submittedAuditsTableContainer th { background-color: #f2f2f2; }
         #submittedAuditsTableContainer tr:nth-child(even) { background-color: #f9f9f9; }
         #submittedAuditsSection button { margin-top: 10px; margin-right: 5px; }
         .action-cell { white-space: nowrap; }

         /* Footer link */
         .footer-link { margin-top: 30px; display: block; }
     </style>
 </head>
 <body>
     <h1>Time and Motion Study</h1>

     <h2>Basic Information</h2>
     <div id="basicInfoContainer">
         <div><label for="evaluatorName">Evaluator Name:</label><input type="text" id="evaluatorName" placeholder="Your Name"></div>
         <div><label for="interactionId">Interaction ID:</label><input type="text" id="interactionId" placeholder="Unique Interaction ID"></div>
         <div><label for="agentName">Agent Name:</label><input type="text" id="agentName" placeholder="Agent Name"></div>
         <div><label for="adp">ADP:</label><input type="text" id="adp" placeholder="Agent ADP"></div>
         <div><label for="date">Interaction Date:</label><input type="date" id="date"></div>
         <div><label for="agentType">Agent Performance:</label><select id="agentType"><option value="Bottom Performer">Bottom Performer</option><option value="Top Performer">Top Performer</option></select></div>
         <div><label>Audit Date:</label><span id="auditDateDisplay"></span></div>
         <div>
             <label for="behaviorIdentified">Behavior Identified (Optional):</label>
             <select id="behaviorIdentified">
                 <option value="">-- Select Behavior --</option>
                 <!-- Options will be populated by JS -->
             </select>
         </div>
     </div>

      <div id="sessionCtx">
         <h2>Session Context</h2>
          <div><label for="accountSelect">Account:</label><select id="accountSelect"><option value="">-- Select Account --</option></select></div>
          <div><label for="interactionTypeSelect">Interaction Type:</label><select id="interactionTypeSelect" disabled><option value="">-- Select Interaction Type --</option></select></div>
          <div><button id="loadStepsButton" disabled>Load Predefined Steps</button></div>
     </div>
     <hr>

     <div>
         <h2>Steps for this Session</h2>
         <div id="stepList" class="steps-table-container">
              <p>Please select Account and Interaction Type, then click "Load Predefined Steps".</p>
              <!-- La tabla de pasos se generará aquí por JS -->
         </div>
     </div>
     <hr>

     <div id="actionButtons">
         <button id="submitInteractionButton">Submit Interaction Data</button>
     </div>
     <hr>

     <div id="submittedAuditsSection">
         <h2>Submitted Audits Log</h2>
         <div id="submittedAuditsTableContainer"><p>No audits submitted yet.</p></div>
          <button id="exportSubmittedButton" disabled>Export Submitted Log to CSV</button>
          <button id="clearSubmittedLogButton" disabled>Clear Submitted Log</button>
     </div>

      <p class="footer-link"><a href="admin.html">Go to Admin Configuration</a></p>

     <script src="script.js"></script>
 </body>
 </html>